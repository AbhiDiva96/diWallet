(()=>{var e={};e.id=702,e.ids=[702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},74292:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(33063),r(63645),r(90996);var s=r(30170),a=r(45002),n=r(83876),i=r.n(n),l=r(66299),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,33063)),"E:\\diWallet\\src\\app\\dashboard\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,63645)),"E:\\diWallet\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["E:\\diWallet\\src\\app\\dashboard\\page.tsx"],u="/dashboard/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3670:(e,t,r)=>{Promise.resolve().then(r.bind(r,83495))},9082:(e,t,r)=>{Promise.resolve().then(r.bind(r,82486)),Promise.resolve().then(r.bind(r,69510)),Promise.resolve().then(r.bind(r,17333))},75217:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,63642,23)),Promise.resolve().then(r.t.bind(r,87586,23)),Promise.resolve().then(r.t.bind(r,47838,23)),Promise.resolve().then(r.t.bind(r,58057,23)),Promise.resolve().then(r.t.bind(r,77741,23)),Promise.resolve().then(r.t.bind(r,13118,23))},83495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(97247),a=r(28964),n=r(10863),i=r(19898),l=r(34178),o=r(69510),d=r(10666);let c=(0,d.Z)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),u=(0,d.Z)([(0,s.jsx)("path",{d:"M19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z",opacity:".3"},"0"),(0,s.jsx)("path",{d:"M19.5 3.5 18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2v14H3v3c0 1.66 1.34 3 3 3h12c1.66 0 3-1.34 3-3V2zM19 19c0 .55-.45 1-1 1s-1-.45-1-1v-3H8V5h11z"},"1"),(0,s.jsx)("path",{d:"M9 7h6v2H9zm7 0h2v2h-2zm-7 3h6v2H9zm7 0h2v2h-2z"},"2")],"ReceiptLongTwoTone"),x=()=>{let[e,t]=(0,a.useState)(!1),[r,l]=(0,a.useState)([]),[o,d]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),{status:h,data:p}=(0,i.useSession)(),g=()=>t(!e);return(0,a.useEffect)(()=>{(async()=>{if("authenticated"===h){d(!0),m(null);try{let e=await n.Z.get("/api/transactions/history");l(e.data.accountHistory)}catch(e){console.error("Failed to fetch transaction history:",e),m("Failed to load transaction history. Please try again.")}finally{d(!1)}}})()},[h,p]),(0,s.jsxs)("div",{className:"relative  flex items-center justify-center pb-4",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("button",{onClick:g,className:"p-4 dark:bg-gray-800 border border-slate-400/20 rounded dark:text-white ",children:s.jsx(u,{})}),s.jsx("span",{className:"flex justify-center dark:text-white ",children:"History"})]}),e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md mx-auto relative",children:[s.jsx("button",{onClick:g,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700","aria-label":"Close popup",children:s.jsx(c,{className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"p-6",children:[s.jsx("h2",{className:"text-2xl dark:text-white font-bold mb-4",children:"Transaction History"}),s.jsx("div",{className:"overflow-y-auto max-h-[70vh]",children:o?s.jsx("p",{className:"text-center dark:text-gray-300",children:"Loading transactions..."}):x?s.jsx("p",{className:"text-center text-red-500 dark:text-red-400",children:x}):0===r.length?s.jsx("p",{className:"text-center dark:text-gray-300",children:"No transactions found."}):s.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.slice(0).reverse().map(e=>s.jsx("li",{className:"py-4 px-2",children:(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("div",{className:"",children:[s.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e.transactionName}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.createdAt).toLocaleString()})]}),s.jsx("div",{className:"flex justify-center",children:s.jsx("p",{className:`text-sm font-semibold ${"income"===e.type?"text-green-500":"text-red-500"}`,children:"income"===e.type?`+₹${e.amount.toFixed(2)}`:`-₹${e.amount.toFixed(2)}`})})]})},e.id))})})]})]})})]})};function m(){let[e,t]=(0,a.useState)({amount:0,name:"",type:""}),[r,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),{data:p,status:g}=(0,i.useSession)();(0,l.useRouter)();let{totalAmount:f,setTotalAmount:b}=(0,o.E)(),y=e=>{t(t=>({...t,type:e}))},v=e=>{let{name:r,value:s}=e.target;t(e=>({...e,[r]:"amount"===r?Number(s):s}))},j=async r=>{r.preventDefault(),d(!0),u(null),h(null);try{let r=await n.Z.post("/api",e);if(200===r.status){h(r.data.message);let t="income"===e.type?e.amount:-e.amount;b(e=>e+t)}t({amount:0,name:"",type:""})}catch(e){u(e.response?.data?.message||"An error occurred"),t({amount:0,name:"",type:""})}finally{d(!1)}};return"loading"===g?s.jsx("div",{children:"Loading..."}):p?(0,s.jsxs)("div",{className:"flex flex-col items-center dark:bg-gray-900 justify-center min-h-screen bg-gray-100",children:[s.jsx(x,{}),(0,s.jsxs)("div",{className:"dark:bg-slate-800/20 shadow-lg rounded-lg p-6 w-full max-w-md mb-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-700 dark:text-white",children:"Total Wallet Amount"}),s.jsx("p",{className:`text-3xl ${f<0?"text-red-500":"text-green-500"} font-bold mt-2`,children:`₹${f}`})]}),(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full max-w-md dark:bg-gray-700/20",children:[s.jsx("h1",{className:"text-2xl font-semibold text-center text-gray-700 dark:text-white mb-6",children:"Add Transaction"}),c&&s.jsx("p",{className:"text-red-500 text-center mb-4",children:c}),m&&s.jsx("p",{className:`text-center mb-4 ${"income"===e.type?"text-green-500":"text-orange-500"}`,children:m}),(0,s.jsxs)("form",{onSubmit:j,children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("input",{type:"number",id:"amount",name:"amount",placeholder:"Enter Amount",value:0===e.amount?"":e.amount,onChange:v,className:"mt-1 block dark:text-white px-4 py-2 bg-transparent border-b border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500 appearance-none custom-number-input",required:!0})}),s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("input",{type:"text",id:"name",name:"name",placeholder:"Transation name",value:e.name,onChange:v,className:"mt-1 block dark:text-white bg-transparent px-4 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",required:!0})}),s.jsx("div",{className:"mb-4",children:(0,s.jsxs)("div",{className:"flex justify-center gap-4 py-4",children:[s.jsx("button",{type:"button",onClick:()=>y("income"),className:`flex px-4 py-2 rounded-md focus:outline-none ${"income"===e.type?"bg-green-500 text-white":"border border-green-500 bg-green-400/20 text-green-500"}`,children:"Income"}),s.jsx("button",{type:"button",onClick:()=>y("expense"),className:`flex px-4 py-2 rounded-md focus:outline-none ${"expense"===e.type?"bg-red-500 text-white":"border border-orange-500 bg-orange-400/20 text-orange-500"}`,children:"Expense"})]})}),s.jsx("div",{className:"flex justify-center",children:s.jsx("button",{type:"submit",disabled:r,className:"w-64 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-500 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:r?"Adding...":"Add Transaction"})})]})]})]}):null}},82486:(e,t,r)=>{"use strict";r.d(t,{Navbar:()=>p});var s=r(97247),a=r(79906),n=r(19898),i=r(28964);let l=()=>{let[e,t]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{"dark"!==localStorage.getItem("theme")&&("theme"in localStorage||!window.matchMedia("(prefers-color-scheme: dark)").matches)?(document.documentElement.classList.remove("dark"),t(!1)):(document.documentElement.classList.add("dark"),t(!0))},[]),s.jsx("button",{onClick:()=>{e?(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")),t(!e)},className:"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-200  rounded-full  px-3",children:e?"\uD83C\uDF19":"☀️"})};var o=r(34178),d=r(21086),c=r(69510),u=r(6971),x=r(50043),m=r(10661);let h=({username:e,onLogout:t})=>{let[r,a]=(0,i.useState)(!1),n=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=e=>{n.current&&!n.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,s.jsxs)("div",{className:"relative",ref:n,children:[s.jsx("button",{onClick:()=>a(!r),className:"flex items-center bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 rounded-full ","aria-expanded":r,"aria-haspopup":"true",children:s.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-500/20 border border-slate-400/20 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:e.charAt(0).toUpperCase()})})}),r&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 divide-y divide-gray-100",children:[(0,s.jsxs)("div",{className:"px-4 py-3",children:[s.jsx("p",{className:"text-sm leading-5",children:"Signed in as"}),s.jsx("p",{className:"text-sm font-medium leading-5 text-gray-900 truncate",children:e})]}),(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsxs)("a",{href:"#profile",className:"flex px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[s.jsx(m.Z,{className:"mr-3 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Your Profile"]}),(0,s.jsxs)("a",{href:"#settings",className:"flex px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[s.jsx(x.Z,{className:"mr-3 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Settings"]})]}),s.jsx("div",{className:"py-1",children:(0,s.jsxs)("button",{onClick:t,className:"flex w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",children:[s.jsx(u.Z,{className:"mr-3 h-5 w-5 text-gray-400","aria-hidden":"true"}),"Sign out"]})})]})]})},p=()=>{let{data:e}=(0,n.useSession)(),t=(0,o.useRouter)(),{totalAmount:r}=(0,c.E)(),i=async()=>{await (0,n.signOut)(),t.push("/")};return s.jsx("nav",{className:"bg-white dark:bg-gray-900 shadow-md px-4",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center py-4",children:[s.jsx(a.default,{href:"/",children:s.jsx("div",{className:"flex justify-center text-lg text-black dark:text-white font-bold md:text-xl",children:"YourWallet"})}),(0,s.jsxs)("div",{className:"flex space-x-4",children:[s.jsx(l,{}),e?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:" flex justify-center gap-2 dark:bg-gray-400/20 p-2 rounded border border-slate-400/20",children:[s.jsx("div",{className:"flex justify-center gap-2 dark:text-white",children:s.jsx(d.Z,{})}),s.jsx("div",{className:"flex justify-center",children:s.jsx("p",{className:`flex justify-center text-xl ${r<0?"text-red-500":"text-green-500"} font-bold `,children:`₹${r}`})})]}),s.jsx(h,{username:`${e.user?.name}`,onLogout:i})]}):s.jsx(s.Fragment,{children:s.jsx(a.default,{href:"/signup",children:s.jsx("button",{className:"flex justify-center border border-gray-800/20 text-lg text-black dark:text-white font-bold md:text-xl p-2 rounded",children:"Sign Up"})})})]})]})})}},69510:(e,t,r)=>{"use strict";r.d(t,{E:()=>d,TotalAmountProvider:()=>c});var s=r(97247),a=r(10863),n=r(19898),i=r(28964),l=r.n(i);let o=(0,i.createContext)(void 0),d=()=>{let e=(0,i.useContext)(o);if(void 0===e)throw Error("useTotalAmount must be used within a TotalAmountProvider");return e},c=({children:e})=>{let[t,r]=(0,i.useState)(0),{data:d,status:c}=(0,n.useSession)();(0,i.useEffect)(()=>{(async()=>{try{let e=await a.Z.get("/api/transactions");setTimeout(()=>{r(e.data.totalTransations)},1e3)}catch(e){console.error()}})()},[d,c]);let u=l().useMemo(()=>({totalAmount:t,setTotalAmount:r}),[t]);return s.jsx(o.Provider,{value:u,children:e})}},17333:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});var s=r(97247),a=r(19898);function n({children:e}){return s.jsx(a.SessionProvider,{children:e})}},33063:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(45347).createProxy)(String.raw`E:\diWallet\src\app\dashboard\page.tsx#default`)},63645:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>x});var s=r(72051),a=r(16694),n=r.n(a),i=r(31512),l=r.n(i);r(67272);var o=r(45347);let d=(0,o.createProxy)(String.raw`E:\diWallet\src\components\navbar.tsx#Navbar`),c=(0,o.createProxy)(String.raw`E:\diWallet\src\context\authProvider.tsx#default`);(0,o.createProxy)(String.raw`E:\diWallet\src\context\amountProvider.tsx#useTotalAmount`);let u=(0,o.createProxy)(String.raw`E:\diWallet\src\context\amountProvider.tsx#TotalAmountProvider`),x={title:"Create Next App",description:"Generated by create next app"};function m({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:`${n().variable} ${l().variable} antialiased`,children:s.jsx(c,{children:(0,s.jsxs)(u,{children:[s.jsx(d,{}),e]})})})})}},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(54564);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[379,873,564],()=>r(74292));module.exports=s})();